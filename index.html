<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KF Solutions</title>
    <style>
        /* General styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f2f2f2;
            color: #333;
        }
        header {
            background-color: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .content {
            margin-top: 20px;
        }
        .weather-section {
            background-color: #e6f7ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .weather-section input {
            padding: 8px;
            margin-right: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        .weather-section button {
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .weather-section button:hover {
            background-color: #45a049;
        }
        #weatherResult {
            margin-top: 15px;
            background-color: #fff;
            padding: 10px;
            border-radius: 4px;
            white-space: pre-wrap;
        }
        .weather-result {
            font-family: Arial, sans-serif;
        }
        .weather-result h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        .weather-result p {
            margin: 8px 0;
            line-height: 1.4;
        }

        /* Mobile styles */
        @media only screen and (max-width: 600px) {
            .container {
                padding: 10px;
            }
        }
    </style>
    <script>
        async function fetchWeather() {
            const location = document.getElementById('location').value;
            if (!location) {
                document.getElementById('weatherResult').innerText = "Voer een locatie in";
                return;
            }
            
            document.getElementById('weatherResult').innerText = "Weer ophalen...";
            
            try {
                const response = await fetch('https://8um2999778.execute-api.eu-west-1.amazonaws.com/prod/weerlive', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ location })
                });
                
                const responseText = await response.text();
                console.log("Raw API Response:", responseText);
                
                // Try to parse the response as JSON
                let data;
                try {
                    data = JSON.parse(responseText);
                    console.log("Parsed data:", data);
                } catch (e) {
                    document.getElementById('weatherResult').innerText = "Fout bij het verwerken van de API-respons: " + e.message + "\n\nRuwe respons: " + responseText;
                    return;
                }
                
                // Check if we have a body property (API Gateway wraps responses)
                if (data.body) {
                    console.log("Found body property, parsing it");
                    // If body is a string, parse it, otherwise use it directly
                    if (typeof data.body === 'string') {
                        try {
                            data = JSON.parse(data.body);
                        } catch (e) {
                            data = data.body;
                        }
                    } else {
                        data = data.body;
                    }
                    console.log("Data after body extraction:", data);
                }
                
                // Controleer of we een geldig resultaat hebben
                if (!data || !data.liveweer || !data.liveweer[0]) {
                    document.getElementById('weatherResult').innerText = "Geen weergegevens gevonden voor deze locatie. Response data: " + JSON.stringify(data);
                    return;
                }
                
                // Haal alleen de huidige weergegevens op
                const currentWeather = data.liveweer[0];
                console.log("Current weather data:", currentWeather);
                
                // Maak een samenvatting van het huidige weer
                const weatherSummary = {
                    plaats: currentWeather.plaats,
                    temperatuur: currentWeather.temp + "¬∞C",
                    gevoelstemperatuur: currentWeather.gtemp + "¬∞C",
                    omschrijving: currentWeather.samenv,
                    windrichting: currentWeather.windr,
                    windkracht: currentWeather.windms + " m/s (Bft " + currentWeather.windbft + ")",
                    luchtvochtigheid: currentWeather.lv + "%",
                    luchtdruk: currentWeather.luchtd + " hPa",
                    zonsopkomst: currentWeather.sup,
                    zonsondergang: currentWeather.sunder
                };
                
                // Toon de samenvatting in een nette opmaak
                let resultHTML = `<div class="weather-result">
                    <h3>Actueel weer in ${weatherSummary.plaats}</h3>
                    <p><strong>${weatherSummary.omschrijving}</strong></p>
                    <p>üå°Ô∏è Temperatuur: ${weatherSummary.temperatuur} (voelt als ${weatherSummary.gevoelstemperatuur})</p>
                    <p>üí® Wind: ${weatherSummary.windrichting} ${weatherSummary.windkracht}</p>
                    <p>üíß Luchtvochtigheid: ${weatherSummary.luchtvochtigheid}</p>
                    <p>üîµ Luchtdruk: ${weatherSummary.luchtdruk}</p>
                    <p>üåÖ Zon op: ${weatherSummary.zonsopkomst}, onder: ${weatherSummary.zonsondergang}</p>
                </div>`;
                
                document.getElementById('weatherResult').innerHTML = resultHTML;
            } catch (error) {
                document.getElementById('weatherResult').innerText = "Er is een fout opgetreden bij het ophalen van het weer: " + error.message;
                console.error("Weather fetch error:", error);
            }
        }
    </script>
</head>
<body>
    <header>
        <h1>Welcome at KF Solutions</h1>
        <p>This is a short overview about my work experience and knowledge.</p>
    </header>
    <div class="container">
        <div class="content">
            <h2>About Me</h2>
            <p>My name is Rob Roos, I live in the Netherlands, and I am an AWS Cloud engineer.</p>
            <p>I started as a freelancer in June 2008. My company name is KF Solutions.</p>
            <p>With more than 25 years of experience in IT in the field of operating
                systems, storage, networks, hardware and various tools and
                applications, I focus specifically on Amazon Web Services, serverless
                and containerization.</p>
        </div>
        
        <div class="weather-section">
            <h2>Weer Informatie</h2>
            <p>Check het actuele weer in Nederland:</p>
            <input type="text" id="location" placeholder="Voer een locatie in">
            <button onclick="fetchWeather()">Verkrijg Weer</button>
            <pre id="weatherResult"></pre>
        </div>
        
        <div class="content">
            <h2>Employability</h2>
            <p>I prefer projects with AWS cloud services, migrations, serverless architectures, improvements, new environments, high availability, virtualization.</p>
        </div>
        <div class="content">
            <h2>Recent Certificates</h2>
            <p>AWS Certified Solutions Architect - Associate </p>
        </div>
        <div class="content">
            <h2>Knowledge and Experience</h2>
            <p>I can help in many categories in AWS related to AWS ( multi- ) account setups and defining all your resources as Infrastructure as Code.</p>
            <p>Here just a short summarize of my knowledge and experience.</p> 
            <p>Please see my contact information below how to get in touch with me. </p>
            <h3>Knowledge</h3>
            <ul style="list-style-type:disc">
                <li>AWS</li>
                <li>Linux</li>
                <li>CICD</li>
                <li>Monitoring</li>
                <li>Serverless tools like Lambda, Fargate , Step functions, EKS Kubernetes</li>
            </ul>
            <h3>Experience</h3>
            <ul style="list-style-type:disc">
                <li>IaC with terraform, CDK, Cloudformation</li>
                <li>WIndows and Linux integrations with Active Directory</li>
                <li>aws multi account setups</li>
                <li>Kubernetes with AWS EKS</li>
                <li>Monitoring with prometheus , grafana, Kibana</li>
                <li>Azure Devops Pipelines</li>
                <li>Python</li>
                <li>AWS Automation for patching and backup </li>
                <li>configuring Security Control Frameworks with CIS standard and AWS Securityhub</li>
            </ul>
        </div>
        <div class="content">
            <h2>Contact</h2>
            <p>This was just a short introduction. Please reach out to me for my CV and/or a personal commentary. </p>
            <p>You can contact me at <a href="mailto:info@kfsolutions.nl">info@kfsolutions.nl</a> or via <a href="https://www.linkedin.com/in/robroos/">linkedin</a>.</p>
        </div>
    </div>
</body>
</html>
